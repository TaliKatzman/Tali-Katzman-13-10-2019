(this.webpackJsonpmy_weather_app=this.webpackJsonpmy_weather_app||[]).push([[0],{23:function(e,t,n){e.exports=n.p+"static/media/spinner.439dc825.gif"},24:function(e,t,n){e.exports=n(35)},29:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(11),o=n.n(r),i=(n(29),n(20)),u=n(2),l="SET_VIEW_HOME",s="SET_VIEW_FAVORITES",m="ADD_FAVORITE",h="REMOVE_FAVORITE",y="SET_LOCATION",v=function(){return{type:l}},p=function(e,t){return{type:y,locationKey:e,cityName:t}},f={HOME:"HOME",FAVORITES:"FAVORITES"},d="http://dataservice.accuweather.com/currentconditions/v1/",E="http://dataservice.accuweather.com/forecasts/v1/daily/5day/",O="http://dataservice.accuweather.com/locations/v1/cities/autocomplete",b="yHAQscY7LS2ebTCFLQg9OLFgKSuyiLKv";var g=Object(u.b)((function(e){return{activeView:e.view}}),(function(e){return{displayHome:function(){return e(v())},displayFavorites:function(){return e({type:s})}}}))((function(e){var t=e.activeView,n=e.displayHome,a=e.displayFavorites;return c.a.createElement("div",{className:"toggle-container"},c.a.createElement("span",{onClick:n,className:"btn ".concat(t===f.HOME?"btn--active":"")},"Home"),c.a.createElement("span",{onClick:a,className:"btn ".concat(t===f.FAVORITES?"btn--active":"")},"Favorites"))}));var N=function(){return c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"header__title"},c.a.createElement(i.a,{size:70}),c.a.createElement("h1",{className:"heading"},"My Weather App")),c.a.createElement(g,null))},j=n(6),K=n(7),S=n(9),w=n(8),k=n(12),C=n(10),F=function(e){var t="".concat(d).concat(e,"?apikey=").concat(b);return fetch(t).then((function(e){return e.json()}))},L=n(21),I=n.n(L),T=function(e){function t(e){var n;return Object(j.a)(this,t),(n=Object(S.a)(this,Object(w.a)(t).call(this,e))).debouncedOnSearchChange=I()(n.onSearchChange,500),n.state={userInput:"",suggestions:[]},n}return Object(C.a)(t,e),Object(K.a)(t,[{key:"onSelectSuggestion",value:function(e){var t={cityName:"".concat(e.LocalizedName,", ").concat(e.Country.LocalizedName),locationKey:e.Key};this.props.changeLocation(t)}},{key:"onSearchChange",value:function(e){var t=this;this.setState({userInput:e},(function(){(function(e){var t="".concat(O,"?q=").concat(e,"&apikey=").concat(b);return fetch(t).then((function(e){return e.json()}))})(t.state.userInput).then((function(e){t.setState({suggestions:e.slice(0,5)})}))}))}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"search"},c.a.createElement("div",{className:"search-container"},c.a.createElement("input",{onChange:function(t){return e.debouncedOnSearchChange(t.target.value)},type:"text",name:"text",placeholder:"Search City...",autoComplete:"off"}),this.state.suggestions.map((function(t){return c.a.createElement("div",{className:"suggestionItem",key:t.Key,onClick:function(){return e.onSelectSuggestion(t)}},"".concat(t.LocalizedName,", ").concat(t.Country.LocalizedName))}))))}}]),t}(a.Component),A=Object(u.b)(null,(function(e){return{changeLocation:function(t){return e(p(t.locationKey,t.cityName))}}}))(T);var V=function(e){var t=e.city,n=e.temp;return c.a.createElement("div",{className:"current-weather"},c.a.createElement("p",{className:"city"},t),c.a.createElement("p",{className:"temp"},n," \xb0"))};var M=function(e){var t=e.forecast,n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(t.Date).getDay()],a=t.Temperature.Minimum.Value;return c.a.createElement("div",{className:"forecastItem"},c.a.createElement("div",{className:"name"},n),c.a.createElement("div",{className:"temp"},a," \xb0"))};var D=function(e){var t=e.weatherForecast;return c.a.createElement("div",{className:"forecast-container"},t.map((function(e){return c.a.createElement(M,{forecast:e,key:e.Date})})))},H=n(22),_=n(16);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var P=Object(u.b)((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(n,!0).forEach((function(t){Object(H.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({favoritesArr:e.favorites},t)}),(function(e,t){return{add:function(){return e((n=t.locationKey,a=t.cityName,{type:m,locationKey:n,cityName:a}));var n,a},remove:function(){return e((n=t.locationKey,{type:h,locationKey:n}));var n}}}))((function(e){var t=e.locationKey,n=e.add,a=e.remove,r=e.favoritesArr.filter((function(e){return e.locationKey===t})).length>0;return c.a.createElement("div",{className:"favorites-controller"},r?c.a.createElement(_.a,{onClick:a}):c.a.createElement(_.b,{onClick:n}),r?c.a.createElement("div",{onClick:a,className:"btn btn-remove"},"Remove From Favorites"):c.a.createElement("div",{onClick:n,className:"btn btn-add"},"Add to Favorites"))})),R=n(23),z=function(e){function t(e){var n;return Object(j.a)(this,t),(n=Object(S.a)(this,Object(w.a)(t).call(this,e))).state={currentWeather:null,weatherForecast:[],isLoading:!1},n.changeCurrentLocation=n.changeCurrentLocation.bind(Object(k.a)(n)),n}return Object(C.a)(t,e),Object(K.a)(t,[{key:"changeCurrentLocation",value:function(){var e=this,t=this.props.location;this.showLoading();var n=F(t.locationKey);n.then((function(n){e.setState({currentWeather:n,city:t.cityName,currentLocationKey:t.locationKey})}));var a=function(e){var t="".concat(E).concat(e,"?apikey=").concat(b,"&metric=true");return fetch(t).then((function(e){return e.json()}))}(t.locationKey);a.then((function(t){e.setState({weatherForecast:t.DailyForecasts})})),Promise.all([n,a]).then((function(){return e.hideLoading()}))}},{key:"componentDidMount",value:function(){null!=this.props.location&&null!=this.props.location.locationKey&&this.changeCurrentLocation()}},{key:"componentDidUpdate",value:function(e,t,n){e.location.locationKey!==this.props.location.locationKey&&this.changeCurrentLocation()}},{key:"showLoading",value:function(){this.setState({isLoading:!0})}},{key:"hideLoading",value:function(){this.setState({isLoading:!1})}},{key:"render",value:function(){var e,t,n=this.state.isLoading;return null!=this.state.currentWeather&&(e=c.a.createElement(V,{temp:this.state.currentWeather[0].Temperature.Metric.Value,city:this.props.location.cityName})),n&&(t=c.a.createElement("div",null,R.Spinner)),c.a.createElement("div",{className:"home-page"},!n&&c.a.createElement(A,{key:this.props.location.locationKey}),t,e,c.a.createElement(P,{locationKey:this.props.location.locationKey,cityName:this.props.location.cityName}),c.a.createElement(D,{weatherForecast:this.state.weatherForecast}))}}]),t}(a.Component),x=Object(u.b)((function(e){return{location:e.location}}),null)(z),J=function(e){function t(e){var n;return Object(j.a)(this,t),(n=Object(S.a)(this,Object(w.a)(t).call(this,e))).state={currentWeather:null},n}return Object(C.a)(t,e),Object(K.a)(t,[{key:"componentDidMount",value:function(){var e=this;F(this.props.locationKey).then((function(t){e.setState({currentWeather:t})}))}},{key:"render",value:function(){var e=this,t="";null!=this.state.currentWeather&&(t=c.a.createElement(V,{temp:this.state.currentWeather[0].Temperature.Metric.Value,city:this.props.cityName}));return c.a.createElement("div",{className:"favoritesItem",onClick:function(){return e.props.clickHandler({cityName:e.props.cityName,locationKey:e.props.locationKey})}},t)}}]),t}(a.Component);var Q=Object(u.b)((function(e){return{favoritesArr:e.favorites}}),(function(e){return{onFavoriteSelect:function(t){e(p(t.locationKey,t.cityName)),e(v())}}}))((function(e){var t=e.favoritesArr,n=e.onFavoriteSelect;return c.a.createElement("div",{className:"favoritesPage"},t.map((function(e){return c.a.createElement(J,{locationKey:e.locationKey,cityName:e.cityName,clickHandler:n})})))}));var q=Object(u.b)((function(e){return{currentView:e.view}}),null)((function(e){var t=e.currentView;return c.a.createElement("div",{className:"main"},c.a.createElement("div",{className:"hero-image"}),t===f.HOME&&c.a.createElement(x,null),t===f.FAVORITES&&c.a.createElement(Q,null))}));var B=function(){return c.a.createElement("div",{className:"app"},c.a.createElement(N,null),c.a.createElement(q,null))},U=n(5),Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.HOME,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return f.FAVORITES;case l:return f.HOME;default:return e}},G=n(17),X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return[].concat(Object(G.a)(e),[{locationKey:t.locationKey,cityName:t.cityName}]);case h:return Object(G.a)(e.filter((function(e){return e.locationKey!==t.locationKey})));default:return e}},Z={locationKey:"215854",cityName:"Tel-Aviv, Israel"},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return{locationKey:t.locationKey,cityName:t.cityName};default:return e}},ee=Object(U.b)({view:Y,favorites:X,location:$}),te=Object(U.c)(ee);o.a.render(c.a.createElement(u.a,{store:te},c.a.createElement(B,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.a48077a9.chunk.js.map